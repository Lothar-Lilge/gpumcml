#summary A step-by-step guide to use GPU-MCML
#labels Featured,Phase-Deploy
#sidebar SiteMap

<wiki:toc max_depth="2" />

This tutorial aims to guide new users through the initial pain of setting up, compiling and running the source code.

== Step 0: Check your graphics card == 
Before you start, make sure that your graphics card is CUDA compatible (check Appendix A of the [http://developer.download.nvidia.com/compute/cuda/3_0/toolkit/docs/NVIDIA_CUDA_ProgrammingGuide.pdf CUDA programming guide]) and has a Compute Capability of between 1.1 and 2.0 (Fermi).  Note that atomic instructions are only supported on devices with a Compute Capability of at least 1.1.  Most graphics cards today should be in this category.

If you don't have a proper graphics card or if you want the best performance from our code, we recommend purchasing the latest Fermi-generation GPU, such as [http://www.nvidia.com/object/product_geforce_gtx_480_us.html GeForce GTX 480].  However, ensure that your power supply is at least 600 W (with 6-pin & 8-pin power connectors) and the motherboard supports PCI-E 2.0 x 16.  

== Step 1: Install Visual Studio (Windows Users Only) ==
Install Microsoft Visual Studio 2008 (Visual C++ 2008). For a free version, download [http://www.microsoft.com/express/downloads/ Visual C++ 2008 Express Edition].

== Step 2: Install CUDA, Developer Drivers, and SDK Samples ==
Then, just follow all the steps in the [http://developer.download.nvidia.com/compute/cuda/3_0/docs/GettingStartedWindows.pdf NVIDIA Getting Started Guide].  

If you have a Fermi GPU, install [http://developer.nvidia.com/object/cuda_3_0_downloads.html CUDA ToolKit 3.0 and GPU Computing SDK code samples] along with the proper Developer Drivers.  *Make sure you upgrade both the driver and the CUDA Toolkit, and not one of the two!  Otherwise, your code will not run !*

== Step 3: Verify the steps above ==
Make sure you have everything set up properly, by running a simple SDK code sample, as suggested in the [http://developer.download.nvidia.com/compute/cuda/3_0/docs/GettingStartedWindows.pdf NVIDIA Getting Started Guide] 

== Step 4: Download our source code package ==
Download and unarchive: [http://gpumcml.googlecode.com/files/fast-gpumcml.zip Fast GPUMCML]

== Step 5: Compile and run GPUMCML ==
==== For Windows User (Visual Studio or VS 2008)====
----
1) Open the project file with VS 2008: *GPUMCML.vcproj* 

2) Click Build Solution (or press F7) 

3) Run the program in VS (press F5) OR 

   Run the program using the command prompt:  
   a) Start-->Run-->Type *cmd*
   b) Type *cd DIR/fast_gpumcml/executable* where 
      DIR is the absolute path where you put the files
   b) Launch the program: *GPUMCML ../input/test.mci*

==== For Linux User (Tested on Ubuntu )====
----
1) Type *make* 

2) Execute the correct version based on the compute capability (CC) of your graphics card (check Appendix A of the [http://developer.download.nvidia.com/compute/cuda/3_0/toolkit/docs/NVIDIA_CUDA_ProgrammingGuide.pdf CUDA programming guide]) 

   GTX 480 (Fermi - CC 2.0): Type *./gpumcml.sm_20 input/test.mci* 

   GTX 280 (CC 1.3): Type *./gpumcml.sm_13 input/test.mci*